#!/usr/bin/env bash
# Unintalls bloatware from the Fossil Sport smartwatch.
# Usage: debloat-fossil-sport [device id]

set -e

apps=(
  com.amberweather.watch
  com.dianping.v1
  com.eg.android.AlipayGphone
  com.fossil.wearables.ds
  com.fossil.wearables.ks
  com.fossil.wearables.mk
  com.fossil.wearables.ms
  com.fossil.wearables.pu
  com.google.android.inputmethod.pinyin
  com.gotokeep.androidwear
  com.mobvoi.ticwear.aw.appstore
  com.mobvoi.ticwear.sidewearvoicesearch
  com.mobvoi.wear.account.aw
  com.mobvoi.wear.appsservice
  com.mobvoi.wear.fitness.aw
  com.mobvoi.wear.health.aw
  com.mobvoi.wear.neteasemusic.aw
  com.mobvoi.wear.social.aw
  com.sdu.didi.psnger
  com.sogou.map.android.maps
  ctrip.android.view
)

[ "$#" -ne 1 ] && echo 'Missing device id!'
id="$1"; shift

pm() {
  adb -s "$id" shell pm "$@"
}

for app in ${apps[@]}; do
  echo "$app"
  pm uninstall --user 0 "$app"
  pm disable-user --user 0 "$app"
done
